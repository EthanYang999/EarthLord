# EarthLord 游戏设计文档 (GDD)

## 文档信息

| 项目 | 内容 |
|------|------|
| 游戏名称 | EarthLord（领地开拓者） |
| 游戏类型 | LBS生存策略游戏 |
| 目标平台 | iOS |
| 游戏引擎 | SwiftUI + Apple MapKit |
| 文档版本 | v1.0 |

---

## 1. 游戏概述

### 1.1 核心理念

**"用脚步丈量你的王国"**

EarthLord是一款将真实世界行走与末日生存策略相结合的创新游戏。玩家需要在现实中行走来圈占虚拟领地、探索真实地标获取资源、建设基地发展壮大，并与其他幸存者进行交易和协作。

### 1.2 游戏卖点

- **真实行走 = 游戏进度**：Walk to Earn机制，鼓励玩家户外运动
- **真实地图 = 游戏世界**：基于Apple Maps的真实世界地图
- **真实地标 = 游戏资源点**：医院、超市、公园都是可探索的资源点
- **末日生存 + LBS**：独特的品类融合

### 1.3 目标体验

> 玩家打开游戏，看到的是一张覆盖末日滤镜的真实地图。他走出家门，开始行走。
>
> 他绕着小区走了一圈，回到起点，系统提示"领地圈占成功，面积2000平方米"。
>
> 他继续向附近的超市走去，走到100米范围内，系统弹出"发现兴趣点：XX超市"。
>
> 他点击搜刮，获得了罐头×10、饮用水×5。
>
> 回到家，他用收集的木材和石头建造了一个篝火。
>
> 晚上，他查看自己的领地，已经是小有规模的幸存者基地了。

---

## 2. 世界观设定

### 2.1 背景故事

**2048年——"终末战争"爆发**

全球性冲突在72小时内摧毁了人类文明。核弹、生化武器、AI武器系统失控...没人知道是谁先动的手。当尘埃落定，99%的人口已经消失。

**2051年——重建开始**

幸存者们从废墟中走出。旧世界的政府、法律、货币体系全部崩塌。

在这片废土上，一份新的社会契约诞生——**《新开拓者协议》**：

> "凡以双足丈量之无主土地，皆为开拓者所有。"
>
> "以物易物，公平交易。"
>
> "互助共赢，重建文明。"

这不是一个关于绝望的末日故事。这是一个关于**重建与希望**的故事。

### 2.2 视觉风格：希望朋克 (Hopepunk)

不同于传统末日游戏的阴暗压抑，EarthLord采用"希望朋克"美学：

| 元素 | 表现 |
|------|------|
| 废墟之上 | 绿色植物破土而出 |
| 破败建筑 | 新生的标志闪闪发光 |
| 色调 | 暖色调为主，代表希望 |
| 天空 | 带有粉紫色霞光的末日天空 |
| UI风格 | 工业风+自然元素的融合 |

### 2.3 关键设定

**GPS卫星网络**
末日之后，部分GPS卫星仍在运行。幸存者利用残存的卫星网络来记录和验证土地所有权。

**通讯设备等级**
- 收音机：只能接收广播
- 对讲机：3公里范围双向通讯
- 营地电台：10公里范围
- 卫星通讯：全球范围（终极目标）

---

## 3. 核心游戏循环

### 3.1 主循环图示

```
┌─────────────────────────────────────────────────────────────┐
│                      游戏核心循环                            │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│   登录注册 → 圈地占领 → 探索搜刮 → 获得资源                   │
│      ↑                              ↓                       │
│      │         ┌──────────────────────────────┐            │
│      │         │  资源用途：                    │            │
│      │         │  • 建造建筑（消耗资源）         │            │
│      │         │  • 交易换物（流通资源）         │            │
│      │         │  • 生存消耗（食物/水）          │            │
│      │         └──────────────────────────────┘            │
│      │                              ↓                       │
│      └──────── 通讯社交 ← 成就排行 ← 发展壮大               │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

### 3.2 循环阶段详解

**阶段一：圈地（获得空间）**
- 玩家行走绘制轨迹
- 回到起点闭合多边形
- 验证通过后获得领地所有权
- 领地是所有活动的基础

**阶段二：探索（获得资源）**
- 在现实中移动到POI附近
- 搜刮获得对应类型资源
- 资源存入背包

**阶段三：建造（消耗资源）**
- 使用资源建造功能建筑
- 建筑提供各种能力增益
- 扩展背包容量、提升生产效率

**阶段四：生存（持续消耗）**
- 饱食度、水分持续下降
- 必须消耗食物和水维持生存
- 创造持续探索的动力

**阶段五：社交（资源流通）**
- 与附近玩家交易物资
- 公共频道交流信息
- 形成社区和联盟

---

## 4. 游戏机制详解

### 4.1 圈地机制

#### 4.1.1 操作流程

```
开始圈地 → 行走绘制轨迹 → 接近起点 → 自动闭合 → 验证检测 → 领地生成
```

#### 4.1.2 规则设定

| 规则 | 数值 | 设计目的 |
|------|------|---------|
| 最小面积 | 100m² | 防止无效圈地 |
| 最大面积 | 50,000m² | 防止单次垄断过多土地 |
| 闭合距离 | 50m内 | 允许合理误差 |
| 重叠检测 | 不允许重叠 | 保护已有领地 |
| 活跃期限 | 90天 | 促进活跃，回收僵尸领地 |

#### 4.1.3 防作弊机制

- **速度检测**：移动速度超过人类行走/跑步上限则标记异常
- **轨迹分析**：过于规则的轨迹（如完美矩形）触发人工审核
- **时间校验**：圈地时间与轨迹长度不匹配则拒绝

### 4.2 探索搜刮机制

#### 4.2.1 POI发现

玩家进入真实世界POI的**100米范围**内时，系统自动检测并提示"发现兴趣点"。

#### 4.2.2 资源产出表

| POI类型 | 主要产出 | 稀有产出 | 产出量 |
|---------|---------|---------|--------|
| 医院/药店 | 急救包、抗生素 | 手术工具 | 5-15个 |
| 超市/商店 | 罐头、饮用水 | 保存良好的食物 | 10-30个 |
| 餐厅/饭店 | 食物原料 | 调味品 | 8-20个 |
| 工厂/工地 | 金属、零件 | 机械组件 | 5-12个 |
| 公园/林地 | 木材、植物 | 草药 | 8-25个 |
| 银行/珠宝店 | 贵金属 | 电子元件 | 2-5个 |
| 学校/图书馆 | 纸张、书籍 | 技术手册 | 5-15个 |
| 加油站 | 燃料 | 化学原料 | 3-8个 |

#### 4.2.3 冷却机制

- 同一POI搜刮后进入**4小时冷却**
- 冷却期间可见但无法搜刮
- 设计目的：鼓励玩家探索更多地点，而非反复刷同一个点

### 4.3 生存体征系统

#### 4.3.1 核心数值

| 属性 | 范围 | 衰减速率 | 低于阈值后果 |
|------|------|---------|-------------|
| 核心生命 | 0-100 | 当饥渴时-1/小时 | 归零=角色死亡 |
| 饱食度 | 0-100% | -5/小时 | <30%时生命开始衰减 |
| 水分 | 0-100% | -10/小时 | <30%时生命开始衰减 |

#### 4.3.2 状态增益

| 条件 | 增益效果 |
|------|---------|
| 饱食度>80% | 探索获得资源+20% |
| 水分>80% | 行走速度记录+10% |
| 两者都>80% | 额外获得经验值+15% |

#### 4.3.3 设计意图

- **紧迫感**：持续的消耗创造游戏动力
- **资源出口**：食物和水有了消耗去处
- **付费点**：可售卖减缓衰减的道具

### 4.4 建造系统

#### 4.4.1 建筑分级

**Tier 1 - 生存基础**（新手阶段）

| 建筑 | 所需资源 | 功能 |
|------|---------|------|
| 篝火 | 石头×20, 木材×30 | 取暖，减缓体征衰减 |
| 简易帐篷 | 布料×15, 木材×20 | 休息恢复生命 |
| 蓄水池 | 石头×30, 金属×10 | 收集雨水 |

**Tier 2 - 功能扩展**（中期阶段）

| 建筑 | 所需资源 | 功能 |
|------|---------|------|
| 小仓库 | 木材×50, 金属×30 | 背包+50格 |
| 工作台 | 木材×40, 金属×50 | 解锁制作配方 |
| 农田 | 土壤×30, 种子×10, 水×20 | 持续产出食物 |

**Tier 3 - 高级设施**（后期阶段）

| 建筑 | 所需资源 | 功能 |
|------|---------|------|
| 太阳能板 | 金属×80, 电子元件×20 | 提供电力 |
| 营地电台 | 电子元件×50, 卫星模块×1 | 扩大通讯范围至10km |
| 大仓库 | 金属×100, 木材×80 | 背包+200格 |

#### 4.4.2 建筑状态机

```
建造中 (Constructing)
    ↓ [建造完成]
待激活 (Inactive)
    ↓ [玩家激活]
运行中 (Active)
    ↓ [长期无维护/遭受破坏]
损坏 (Damaged)
    ↓ [修复]
运行中 (Active)
```

### 4.5 交易系统

#### 4.5.1 以物易物

末日世界没有货币，只有以物易物。

**交易流程**：
1. 卖家发布挂单："我提供: 罐头×10 | 我需要: 药品×5"
2. 买家进入卖家领地100米范围
3. 买家看到挂单，点击"接受交易"
4. 系统自动完成物品交换

#### 4.5.2 交易规则

- 必须进入对方领地**100米范围**才能看到挂单
- 卖家领地需开启"允许交易"开关
- 交易即时完成，不可撤销
- 系统记录交易历史

### 4.6 通讯系统

#### 4.6.1 设备等级与功能

| 设备 | 获取方式 | 功能 | 范围 |
|------|---------|------|------|
| 收音机 | 初始装备 | 只能接收官方广播和公共频道 | - |
| 对讲机 | 建造/购买 | 可发送消息到公共频道 | 3km |
| 营地电台 | 建造/购买 | 创建私人频道，扩大范围 | 10km |
| 卫星通讯 | 内购/成就 | 全球通讯，跨服交流 | 全球 |

#### 4.6.2 频道类型

- **公共频道**：所有人可见（范围内），用于区域交流
- **私人频道**：创建者邀请加入，用于联盟/好友交流
- **官方频道**：系统公告，单向广播

#### 4.6.3 PTT（按键通话）

模拟真实对讲机体验：
- 长按麦克风按钮发送消息
- 松开后消息发送
- 增强沉浸感

---

## 5. 数值系统

### 5.1 资源体系

#### 5.1.1 资源分类

| 分类 | 物品示例 | 主要用途 |
|------|---------|---------|
| 食物类 | 罐头、新鲜食物、饮用水 | 恢复饱食度/水分 |
| 药品类 | 急救包、抗生素、维生素 | 恢复生命值 |
| 基础材料 | 木材、石头、金属 | 建造建筑 |
| 高级材料 | 电子元件、卫星模块 | 高级建筑/设备 |
| 特殊物品 | 地图碎片、技术手册 | 任务/解锁 |

#### 5.1.2 资源稀有度

| 稀有度 | 获取概率 | 示例 |
|--------|---------|------|
| 普通 (Common) | 70% | 木材、石头、罐头 |
| 稀有 (Rare) | 25% | 金属、药品、电子元件 |
| 史诗 (Epic) | 4.5% | 卫星模块、技术手册 |
| 传说 (Legendary) | 0.5% | 古代科技残骸 |

### 5.2 经济平衡

#### 5.2.1 资源产出与消耗

**每日预期产出**（活跃玩家，探索10个POI）：
- 食物类：约50-100单位
- 材料类：约30-60单位
- 高级材料：约5-10单位

**每日预期消耗**：
- 生存消耗（饱食度+水分）：约20-30单位食物/水
- 建造消耗：视建造活动而定

**设计原则**：产出略大于基础消耗，玩家有盈余用于建造和交易。

#### 5.2.2 背包容量

| 阶段 | 容量 | 获取方式 |
|------|------|---------|
| 初始 | 100格 | 默认 |
| 小仓库 | +50格 | 建造 |
| 中仓库 | +100格 | 建造 |
| 大仓库 | +200格 | 建造 |
| VIP扩容 | +100格 | 订阅 |

### 5.3 成长系统

#### 5.3.1 玩家等级

| 等级 | 所需经验 | 解锁内容 |
|------|---------|---------|
| 1-5 | 1000/级 | 基础功能 |
| 6-10 | 2000/级 | 高级建筑解锁 |
| 11-20 | 3000/级 | 联盟功能 |
| 21-50 | 5000/级 | 稀有成就 |

#### 5.3.2 经验获取

| 行为 | 经验值 |
|------|--------|
| 圈地（每100m²） | 10 |
| 探索POI | 50 |
| 建造建筑 | 100 |
| 完成交易 | 30 |
| 完成成就 | 变化 |

---

## 6. 成就系统

### 6.1 成就分类

#### 新手成就（引导功能）

| 成就名称 | 条件 | 奖励 |
|---------|------|------|
| 新手领主 | 完成第一次圈地 | 100金币 |
| 末世拾荒者 | 完成第一次搜刮 | 50金币 |
| 建设者起步 | 建造第一个建筑 | 100金币 |
| 以物易物 | 完成第一次交易 | 75金币 |
| 无线电初体验 | 发送第一条公共消息 | 50金币 |

#### 进阶成就（挑战目标）

| 成就名称 | 条件 | 奖励 |
|---------|------|------|
| 地产大亨 | 拥有5块领地 | 500金币 |
| 探索先锋 | 探索100个POI | 300金币 |
| 基建狂魔 | 建造20个建筑 | 400金币 |
| 交易专家 | 完成50次交易 | 350金币 |
| 生存大师 | 连续存活30天 | 600金币 |

#### 稀有成就（荣誉展示）

| 成就名称 | 条件 | 奖励 |
|---------|------|------|
| 开拓传奇 | 累计领地面积达100万m² | 专属头像框 |
| 废土行者 | 累计行走1000公里 | 专属称号 |
| 文明重建者 | 所有建筑升至满级 | 传说奖杯 |

### 6.2 成就稀有度

| 稀有度 | 颜色 | 完成率预期 |
|--------|------|-----------|
| 普通 | 灰色 | >50%玩家 |
| 稀有 | 蓝色 | 20-50%玩家 |
| 史诗 | 紫色 | 5-20%玩家 |
| 传说 | 金色 | <5%玩家 |

---

## 7. 商业化设计

### 7.1 付费模式

#### 7.1.1 订阅制

| 订阅包 | 价格 | 权益 |
|--------|------|------|
| 开拓者月卡 | $9.99/月 | 无限探索次数、范围扩大50%、每日资源礼包 |
| 领主通行证 | $19.99/月 | 全部月卡权益 + VIP客服 + 专属皮肤 + 建造加速 |

#### 7.1.2 一次性购买

| 商品 | 价格 | 内容 |
|------|------|------|
| 初级物资包 | $0.99 | 罐头×50, 饮用水×30, 木材×20 |
| 中级物资包 | $2.99 | 高级食物×30, 药品×20, 金属×30 |
| 高级物资包 | $9.99 | 稀有材料×20, 电子元件×10, 卫星模块×1 |

### 7.2 付费点设计原则

| 原则 | 实现 |
|------|------|
| 不卖数值 | 付费不能直接购买领地或战斗力 |
| 卖时间 | 付费加速建造、减少冷却 |
| 卖便利 | 扩容、范围扩大、额外次数 |
| 卖外观 | 皮肤、头像框、称号 |

### 7.3 免费玩家体验保障

- 所有核心功能免费可用
- 只是效率和便利性差异
- 不存在"付费墙"阻断进度

---

## 8. 社交系统

### 8.1 社交功能

| 功能 | 描述 |
|------|------|
| 公共频道 | 3km范围内玩家实时聊天 |
| 私人频道 | 创建/加入兴趣群组 |
| 交易系统 | 与附近玩家以物易物 |
| 排行榜 | 领地、探索、建筑三榜竞争 |
| 好友系统 | （规划中）添加好友，私聊 |
| 联盟系统 | （规划中）组建联盟，协作开发 |

### 8.2 社交激励

- 交易完成获得经验
- 帮助新人获得成就
- 联盟贡献排名
- 公共频道活跃奖励

---

## 9. UI/UX设计指南

### 9.1 界面结构

```
┌─────────────────────────────────────┐
│            顶部状态栏               │
│  [生命] [饱食度] [水分] [金币]        │
├─────────────────────────────────────┤
│                                     │
│                                     │
│            地图主界面               │
│       (卫星地图 + 末日滤镜)          │
│                                     │
│                                     │
├─────────────────────────────────────┤
│         底部导航栏                   │
│  [地图] [背包] [建造] [通讯] [个人]   │
└─────────────────────────────────────┘
```

### 9.2 视觉规范

| 元素 | 规范 |
|------|------|
| 主色调 | 军绿色 #4A5D4A，代表生存与希望 |
| 强调色 | 暖橙色 #E07B39，代表温暖与活力 |
| 背景色 | 深灰色 #2D2D2D，末日氛围 |
| 字体 | SF Pro (iOS系统字体) |
| 图标 | 扁平化，带有工业感的线条图标 |

### 9.3 交互原则

- **即时反馈**：所有操作都有视觉/声音反馈
- **防误操作**：重要操作（如删除）需二次确认
- **本地优先**：离线也能查看数据
- **渐进式引导**：通过成就系统引导新手

---

## 10. 音频设计

### 10.1 背景音乐

| 场景 | 风格 |
|------|------|
| 主界面/地图 | 空灵、带有希望感的氛围音乐 |
| 探索中 | 轻快、带有冒险感的节奏 |
| 建造界面 | 工业感、敲击声元素 |
| 通讯界面 | 电子音、无线电静音效果 |

### 10.2 音效

| 动作 | 音效 |
|------|------|
| 圈地成功 | 满足感的"叮"声 |
| 发现POI | 雷达扫描声 |
| 搜刮获得物资 | 收集物品声 |
| 建造开始 | 锤子敲击声 |
| 收到消息 | 无线电滋滋声 |
| 交易完成 | 握手/交换声 |

---

## 11. 后续规划

### 11.1 版本路线图

| 版本 | 主要内容 |
|------|---------|
| v1.0 | 核心玩法：圈地、探索、建造、背包 |
| v1.1 | 社交系统：交易、公共频道 |
| v1.2 | 成长系统：成就、排行榜 |
| v2.0 | 商业化：内购、订阅 |
| v2.5 | 联盟系统：组队、联盟战 |
| v3.0 | PvP系统：领地争夺、防御建筑 |

### 11.2 长期愿景

- 建立活跃的玩家社区
- 举办线下圈地活动
- 开发跨服联盟战玩法
- 引入UGC内容（玩家自制任务）

---

## 12. 附录

### 12.1 名词解释

| 术语 | 解释 |
|------|------|
| LBS | Location-Based Service，基于位置的服务 |
| POI | Point of Interest，兴趣点（真实世界的地标） |
| PTT | Push to Talk，按键通话 |
| Walk to Earn | 走路赚取（游戏奖励） |
| 希望朋克 | Hopepunk，乐观向上的末日美学风格 |

### 12.2 参考游戏

| 游戏 | 参考点 |
|------|--------|
| Pokemon GO | LBS玩法、POI系统 |
| Ingress | 领地争夺、阵营对抗 |
| 饥荒 | 生存体征、资源管理 |
| 方舟/Rust | 建造系统、以物易物 |
| 部落冲突 | 基地建设、联盟系统 |

### 12.3 核心代码模块

| 功能 | 文件 |
|------|------|
| 用户认证 | AuthManager.swift |
| 位置服务 | LocationManager.swift |
| 领地管理 | TerritoryManager.swift |
| POI发现 | POIManager.swift |
| 探索搜刮 | ExplorationManager.swift |
| 物品管理 | ItemManager.swift |
| 建造系统 | BuildingManager.swift |
| 交易系统 | TradeManager.swift |
| 通讯系统 | RadioManager.swift, CommunicationManager.swift |
| 频道管理 | ChannelManager.swift |
| 内购支付 | StoreKitManager.swift |
| 排行榜 | LeaderboardManager.swift |
| 成就系统 | AchievementManager.swift |
| 生存体征 | VitalSignsManagerV2.swift |
